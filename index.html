<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>THE CHOW – Breakfast Order</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
.top-logos {
  width: 100%;
  max-width: 900px; /* same width as your .page probably */
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 16px 12px;
}

.logo {
  height: 56px; /* change if too big/small */
  object-fit: contain;
}

/* optional: make THE CHOW a bit bigger */
.chow-logo {
  height: 64px;
}

/* optional: make hotel logo slightly smaller */
.hotel-logo {
  height: 48px;
}



	  
    :root {
      --bg: #f3f3f3;
      --card: #ffffff;
      --accent: #222222;
      --border: #dddddd;
      --disabled: #e6e6e6;
    }


  {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      background: var(--bg);
      display: flex;
      justify-content: center;
      padding: 16px;
    }
    .page {
      max-width: 900px;
      width: 100%;
      //background: var(--bg);  i changed this
      border-radius: 12px;
      padding: 20px 18px 28px;
      //box-shadow: 0 8px 25px rgba(0,0,0,0.08); i changed this
    }

    h1 {
      margin: 0 0 6px;
      font-size: 1.6rem;
      text-align: center;
      color: var(--accent);
    }

    .subtitle {
      text-align: center;
      font-size: 0.9rem;
      color: #555;
      margin-bottom: 18px;
    }
    .lang-switch {
      display: flex;
      justify-content: flex-end;
      align-items: center;
      gap: 6px;
      font-size: 0.8rem;
      margin-bottom: 8px;
      color: #555;
    }

    .lang-switch select {
      padding: 4px 6px;
      border-radius: 6px;
      border: 1px solid var(--border);
      font-size: 0.8rem;
    }





	  
    .section-title {
      margin: 22px 0 8px;
      font-size: 1.05rem;
      font-weight: 600;
      color: var(--accent);
      border-left: 4px solid var(--accent);
      padding-left: 8px;
    }

    .field-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 10px;
    }

    .field {
      flex: 1 1 140px;
      min-width: 140px;
    }

    label {
      display: block;
      font-size: 0.82rem;
      margin-bottom: 4px;
      color: #555;
      font-weight: 500;
    }

    input[type="text"],
    input[type="datetime-local"],
    select,
    textarea {
      width: 100%;
      padding: 7px 8px;
      border-radius: 6px;
      border: 1px solid var(--border);
      font-size: 0.86rem;
      outline: none;
    }

    select:focus,
    input:focus,
    textarea:focus {
      border-color: var(--accent);
    }

    select:disabled {
      background: var(--disabled);
      color: #888;
      border-color: #c8c8c8;
    }

    textarea {
      resize: vertical;
      min-height: 60px;
    }

    .note {
      font-size: 0.8rem;
      color: #777;
      margin-bottom: 6px;
    }

    .card {
      border: 1px solid var(--border);
      border-radius: 8px;
      padding: 10px 12px;
      margin-bottom: 10px;
      background: #fafafa;
    }

    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: 0.9rem;
      font-weight: 600;
      margin-bottom: 6px;
    }

    .pill {
      font-size: 0.72rem;
      background: #f0e6d8;
      color: #664400;
      padding: 2px 6px;
      border-radius: 999px;
    }

    button {
      border-radius: 6px;
      border: none;
      padding: 8px 12px;
      font-size: 0.86rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 4px;
      white-space: nowrap;
	 box-shadow: 0 8px 25px rgba(0,0,0,0.2); //i changed this
    }

    .btn-primary {
      background: var(--accent);
      color: white;
    }

    .btn-secondary {
      background: #eeeeee;
      color: #333333;
    }

    .btn-block {
      width: 100%;
      justify-content: center;
    }

    .actions {
      margin-top: 20px;
    }

    .error {
      color: #b00020;
      font-size: 0.8rem;
      margin-top: 4px;
    }

    .success {
      color: #0a7b13;
      font-size: 0.85rem;
      margin-top: 8px;
    }

    .total-line {
      font-size: 0.95rem;
      font-weight: 600;
      color: #222;
      padding: 8px 10px;
      border-radius: 8px;
      background: #f1f1f1;
    }

    @media (max-width: 600px) {
      .page {
        padding: 16px 12px 22px;
      }
    }
  </style>
</head>
<body>
	<div class="top-logos">
  <img src="the-chow-logo.png" alt="THE CHOW Logo" class="logo chow-logo" />
  <img src="hotel-logo.png" alt="Hotel Logo" class="logo hotel-logo" />
</div>
  <div class="page">
    <div class="lang-switch">
      <span>Language:</span>
      <select id="langSelect">
        <option value="en">English</option>
        <option value="de">Deutsch</option>
        <option value="es">Español</option>
        <option value="it">Italiano</option>
        <option value="fr">Français</option>
        <option value="ar">العربية</option>
      </select>
    </div>

    <h1 id="t_title">Breakfast Order</h1>
    <div class="subtitle" id="t_subtitle">
      Breakfast will be delivered to your room<br/> 
      from THE CHOW (next to your hotel).<br/>
      Please check your room number and select your items.<br/>
      Estimated delivery: <b>15–20 minutes</b>.
    </div>
	  <form id="orderForm">
      <!-- Guest info -->
      <div class="section-title" id="t_guest_info">Guest information</div>
      <div class="field-row">
        <div class="field">
              <label id="t_label_room">Room number <span style="color:#b00020">*</span></label>
          <select id="roomNumber" required>
            <option value="">Select room</option>
            <option>1</option><option>2</option><option>3</option><option>4</option>
            <option>5</option><option>6</option><option>7</option><option>8</option>
            <option>9</option><option>10</option><option>11</option><option>12</option>
            <option>13</option><option>14</option>
          </select>
        </div>
        <div class="field">
  <label id="t_label_guest">Guest name <span style="color:#b00020">*</span></label>
  <input type="text" id="guestName" required placeholder="Your name" />
</div>

      </div>

      <div class="field-row">
        <div class="field">
  <label id="t_label_delivery">Preferred delivery time <span style="color:#b00020">*</span></label>
  <select id="deliveryOption" required>
            <option value="">Choose...</option>
            <option value="asap">As soon as possible</option>
            <option value="1h">In one hour</option>
            <option value="specific">At a specific time</option>
          </select>
        </div>
        <div class="field" id="specificTimeField" style="display:none;">
            <label id="t_label_specific">Specific date &amp; time</label>
          <input type="datetime-local" id="specificDateTime" />
        </div>
      </div>

      <!-- HOTEL BREAKFAST -->
      <div class="section-title" id="t_hotel_title">Hotel Breakfast Menu – €19.90</div>
      <div class="note" id="t_hotel_desc">
        Fine Swiss cheese slices, smooth cream cheese and premium turkey ham, egg of choice, fruit, granola bowl,
        juice, butter, marmalade & honey, flaky butter croissant, Fresh-Baked Bread and a hot drink of choice.
      </div>
      <div class="field-row">
        <div class="field">
          <label>Number of Hotel Breakfast sets</label>
          <select id="hotelQty">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </div>
      </div>
      <div id="hotelSets"></div>

      <!-- CONTINENTAL LIGHT BREAKFAST -->
      <div class="section-title" id="t_cont_title">Continental Light Breakfast – €7.90</div>
      <div class="note" id="t_cont_desc">
        Hot drink of choice and a croissant.
      </div>
      <div class="field-row">
        <div class="field">
          <label>Number of Continental Light sets</label>
          <select id="contQty">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </div>
      </div>
      <div id="contSets"></div>

      <!-- MATCHA & COOKIE – DYNAMIC -->
      <div class="section-title" id="t_matcha_title">Matcha & Cookie Set – €9.90</div>
      <div class="note" id="t_matcha_desc">
        Strawberry, raspberry, coconut and mango matcha are served cold. Matcha Latte can be warm or cold.
        All matcha drinks include your choice of milk and a cookie.
      </div>
      <div class="field-row">
        <div class="field">
          <label>Number of Matcha & Cookie sets</label>
          <select id="matchaQty">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
          </select>
        </div>
      </div>
      <div id="matchaSets"></div>

      <!-- EXTRAS – DYNAMIC VIA BUTTON -->
      <div class="section-title" id="t_extras_title">Extras</div>
      <div class="note">
        Tap "+ Add extra" to add as many extras as you like.<br/>
      </div>

      <div id="extrasContainer"></div>
      <div class="field-row">
        <div class="field">
          <button type="button" id="addExtraBtn" class="btn-secondary">+ Add extra item</button>
        </div>
      </div>

      <!-- ORDER TOTAL -->
      <div class="section-title" id="t_total_title">Total order price:</div>
      <div class="field-row">
        <div class="field">
          <div id="orderTotal" class="total-line"> €0.00</div>
        </div>
      </div>

      <!-- Notes -->
      <div class="section-title" id="t_notes_title">Notes / Allergies</div>
      <div class="field-row">
        <div class="field">
          <textarea id="notes" placeholder="Allergies, special instructions, no sugar, etc."></textarea>
        </div>
      </div>

      <div class="actions">
  <button type="submit" class="btn-primary btn-block" id="t_btn_submit">Submit order</button>
  <div id="formMessage"></div>
</div>
    </form>
  </div>

  <script>
	var currentLang = "en";
var currentTexts = null;
  
document.addEventListener("DOMContentLoaded", function () {

      // --- LANGUAGE SETUP (title + subtitle) ---
      var translations = {
en: {
  title: "Breakfast Order",
  subtitle:
    "Breakfast will be delivered to your room<br/>" +
    "from THE CHOW (next to your hotel).<br/>" +
    "Please check your room number and select your items.<br/>" +
    "Estimated delivery: <b>15–20 minutes</b>.",
  guestInfo: "Guest information",
  hotelTitle: "Hotel Breakfast Menu – €19.90",
  contTitle: "Continental Light Breakfast – €7.90",
  matchaTitle: "Matcha & Cookie Set – €9.90",
  extrasTitle: "Extras",
  totalTitle: "Total order price:",
  notesTitle: "Notes / Allergies",
  hotelDesc:
    "Fine Swiss cheese slices, smooth cream cheese and premium turkey ham, egg of choice, fruit, granola bowl, " +
    "juice, butter, marmalade &amp; honey, flaky butter croissant, fresh-baked bread and a hot drink of choice.",
  contDesc:
    "Hot drink of choice and a croissant.",
  matchaDesc:
    "Strawberry, raspberry, coconut and mango matcha are served cold. Matcha Latte can be warm or cold. " +
    "All matcha drinks include your choice of milk and a cookie.",
  labelRoom: "Room number",
  labelGuest: "Guest name",
  labelDelivery: "Preferred delivery time",
  labelSpecific: "Specific date & time",
  btnSubmit: "Submit order",
  placeName: "Your name",
  placeNotes: "Allergies, special instructions, no sugar, etc.",
  sending: "Sending order...",
  success: "Order sent successfully. Thank you!",
  errorMissing: "Please fill in room, name and delivery time.",
  errorSpecific: "Please choose a specific date and time.",
  errorSend: "There was a problem sending your order. Please contact reception or THE CHOW.",
  alertSuccess: "Your order has been sent to THE CHOW. Thank you!",
  alertError: "Error sending order. Please contact reception."
},



        de: {
  title: "Frühstücksbestellung",
  subtitle:
    "Das Frühstück wird auf Ihr Zimmer geliefert<br/>" +
    "von THE CHOW (direkt neben Ihrem Hotel).<br/>" +
    "Bitte prüfen Sie Ihre Zimmernummer und wählen Sie Ihre Speisen.<br/>" +
    "Voraussichtliche Lieferzeit: <b>15–20 Minuten</b>.",
  guestInfo: "Gästeinformationen",
  hotelTitle: "Hotel-Frühstücksmenü – 19,90 €",
  contTitle: "Kontinentales leichtes Frühstück – 7,90 €",
  matchaTitle: "Matcha & Keks Set – €9.90",
  extrasTitle: "Extras",
  totalTitle: "Gesamtbestellpreis:",
  notesTitle: "Hinweise / Allergien",
  hotelDesc:
    "Feine Schweizer Käsescheiben, Rahmkäse und Puten-Schinken in Premiumqualität, Ei nach Wahl, Obst, Granola-Bowl, " +
    "Saft, Butter, Marmelade &amp; Honig, ein buttriges Croissant, frisches Brot und ein warmes Getränk nach Wahl.",
  contDesc:
    "Heißgetränk nach Wahl und ein Croissant.",
  matchaDesc:
    "Erdbeer-, Himbeer-, Kokos- und Mango-Matcha werden kalt serviert. Matcha Latte kann warm oder kalt sein. " +
    "Alle Matcha-Getränke enthalten Milch nach Wahl und einen Keks.",
  labelRoom: "Zimmernummer",
  labelGuest: "Name des Gastes",
  labelDelivery: "Bevorzugte Lieferzeit",
  labelSpecific: "Genaues Datum & Uhrzeit",
  btnSubmit: "Bestellung senden",
  placeName: "Ihr Name",
  placeNotes: "Allergien, besondere Wünsche, kein Zucker, usw.",
  sending: "Bestellung wird gesendet...",
  success: "Bestellung erfolgreich gesendet. Vielen Dank!",
  errorMissing: "Bitte füllen Sie Zimmernummer, Name und Lieferzeit aus.",
  errorSpecific: "Bitte wählen Sie ein genaues Datum und eine Uhrzeit.",
  errorSend: "Es gab ein Problem beim Senden Ihrer Bestellung. Bitte wenden Sie sich an die Rezeption oder THE CHOW.",
  alertSuccess: "Ihre Bestellung wurde an THE CHOW gesendet. Vielen Dank!",
  alertError: "Fehler beim Senden der Bestellung. Bitte wenden Sie sich an die Rezeption."

},

        es: {
  title: "Pedido de desayuno",
  subtitle:
    "El desayuno se entregará en su habitación<br/>" +
    "por THE CHOW (al lado de su hotel).<br/>" +
    "Por favor, compruebe su número de habitación y seleccione sus productos.<br/>" +
    "Tiempo estimado de entrega: <b>15–20 minutos</b>.",
  guestInfo: "Información del huésped",
  hotelTitle: "Menú de desayuno del hotel – 19,90 €",
  contTitle: "Desayuno continental ligero – 7,90 €",
  matchaTitle: "Set de matcha y galleta – €9.90",
  extrasTitle: "Extras",
  totalTitle: "Precio total del pedido:",
  notesTitle: "Notas / Alergias",
  hotelDesc:
    "Lonchas de queso suizo fino, queso crema suave y jamón de pavo de primera calidad, huevo a elección, fruta, bol de granola, " +
    "zumo, mantequilla, mermelada y miel, un cruasán de mantequilla hojaldrado, pan recién horneado y una bebida caliente a elección.",
  contDesc:
    "Bebida caliente a elección y un cruasán.",
  matchaDesc:
    "Los matchas de fresa, frambuesa, coco y mango se sirven fríos. El matcha latte puede ser caliente o frío. " +
    "Todas las bebidas de matcha incluyen leche a elección y una galleta.",
  labelRoom: "Número de habitación",
  labelGuest: "Nombre del huésped",
  labelDelivery: "Hora de entrega preferida",
  labelSpecific: "Fecha y hora específicas",
  btnSubmit: "Enviar pedido",
  placeName: "Su nombre",
  placeNotes: "Alergias, indicaciones especiales, sin azúcar, etc.",
  sending: "Enviando pedido...",
  success: "Pedido enviado correctamente. ¡Gracias!",
  errorMissing: "Por favor, rellene la habitación, el nombre y la hora de entrega.",
  errorSpecific: "Por favor, elija una fecha y hora específicas.",
  errorSend: "Hubo un problema al enviar su pedido. Contacte con la recepción o con THE CHOW.",
  alertSuccess: "Su pedido ha sido enviado a THE CHOW. ¡Gracias!",
  alertError: "Error al enviar el pedido. Por favor, contacte con la recepción."


},

        it: {
  title: "Ordine per la colazione",
  subtitle:
    "La colazione verrà consegnata in camera<br/>" +
    "da THE CHOW (accanto al vostro hotel).<br/>" +
    "Controllate il numero della vostra camera e scegliete gli articoli.<br/>" +
    "Tempo di consegna stimato: <b>15–20 minuti</b>.",
  guestInfo: "Informazioni ospite",
  hotelTitle: "Menu colazione dell'hotel – 19,90 €",
  contTitle: "Colazione continentale leggera – 7,90 €",
  matchaTitle: "Set matcha e biscotto – €9.90",
  extrasTitle: "Extra",
  totalTitle: "Prezzo totale dell'ordine:",
  notesTitle: "Note / Allergie",
  hotelDesc:
    "Fette di formaggio svizzero, morbido formaggio spalmabile e prosciutto di tacchino di alta qualità, uovo a scelta, frutta, bowl di granola, " +
    "succo, burro, marmellata e miele, croissant al burro sfogliato, pane appena sfornato e una bevanda calda a scelta.",
  contDesc:
    "Bevanda calda a scelta e un croissant.",
  matchaDesc:
    "I matcha alla fragola, lampone, cocco e mango vengono serviti freddi. Il matcha latte può essere caldo o freddo. " +
    "Tutte le bevande matcha includono latte a scelta e un biscotto.",
  labelRoom: "Numero di camera",
  labelGuest: "Nome dell'ospite",
  labelDelivery: "Orario di consegna preferito",
  labelSpecific: "Data e ora specifiche",
  btnSubmit: "Invia ordine",
  placeName: "Il tuo nome",
  placeNotes: "Allergie, richieste speciali, senza zucchero, ecc.",
  sending: "Invio dell'ordine in corso...",
  success: "Ordine inviato con successo. Grazie!",
  errorMissing: "Compila numero di camera, nome e orario di consegna.",
  errorSpecific: "Seleziona una data e un orario specifici.",
  errorSend: "Si è verificato un problema durante l'invio dell'ordine. Contatta la reception o THE CHOW.",
  alertSuccess: "Il tuo ordine è stato inviato a THE CHOW. Grazie!",
  alertError: "Errore durante l'invio dell'ordine. Contatta la reception."


},

        fr: {
  title: "Commande de petit-déjeuner",
  subtitle:
    "Le petit-déjeuner sera livré dans votre chambre<br/>" +
    "par THE CHOW (à côté de votre hôtel).<br/>" +
    "Veuillez vérifier votre numéro de chambre et sélectionner vos articles.<br/>" +
    "Délai de livraison estimé : <b>15–20 minutes</b>.",
  guestInfo: "Informations client",
  hotelTitle: "Menu petit-déjeuner de l'hôtel – 19,90 €",
  contTitle: "Petit-déjeuner continental léger – 7,90 €",
  matchaTitle: "Formule matcha & cookie – €9.90",
  extrasTitle: "Extras",
  totalTitle: "Prix total de la commande :",
  notesTitle: "Remarques / Allergies",
  hotelDesc:
    "Fines tranches de fromage suisse, fromage frais onctueux et jambon de dinde de qualité, œuf au choix, fruit, bol de granola, " +
    "jus, beurre, confiture et miel, croissant au beurre feuilleté, pain fraîchement cuit et boisson chaude au choix.",
  contDesc:
    "Boisson chaude au choix et un croissant.",
  matchaDesc:
    "Les matchas à la fraise, framboise, coco et mangue sont servis froids. Le matcha latte peut être chaud ou froid. " +
    "Toutes les boissons au matcha incluent un lait au choix et un cookie.",
  labelRoom: "Numéro de chambre",
  labelGuest: "Nom du client",
  labelDelivery: "Heure de livraison souhaitée",
  labelSpecific: "Date et heure spécifiques",
  btnSubmit: "Envoyer la commande",
  placeName: "Votre nom",
  placeNotes: "Allergies, demandes particulières, sans sucre, etc.",
  sending: "Envoi de la commande...",
  success: "Commande envoyée avec succès. Merci !",
  errorMissing: "Veuillez indiquer la chambre, le nom et l'heure de livraison.",
  errorSpecific: "Veuillez choisir une date et une heure précises.",
  errorSend: "Un problème est survenu lors de l'envoi de votre commande. Veuillez contacter la réception ou THE CHOW.",
  alertSuccess: "Votre commande a été envoyée à THE CHOW. Merci !",
  alertError: "Erreur lors de l'envoi de la commande. Veuillez contacter la réception."


},

        ar: {
  title: "طلب الفطور",
  subtitle:
    "سيتم توصيل الفطور إلى غرفتك<br/>" +
    "من THE CHOW (بجوار الفندق).<br/>" +
    "يرجى التأكد من رقم الغرفة واختيار الأصناف المطلوبة.<br/>" +
    "الوقت المتوقع للتوصيل: <b>١٥–٢٠ دقيقة</b>.",
  guestInfo: "معلومات النزيل",
  hotelTitle: "قائمة فطور الفندق – ١٩٫٩٠ €",
  contTitle: "فطور كونتيننتال خفيف – ٧٫٩٠ €",
  matchaTitle: "مجموعة ماتشا مع كوكي – ٩٫٩٠ €",
  extrasTitle: "إضافات",
  totalTitle: "إجمالي قيمة الطلب:",
  notesTitle: "ملاحظات / حساسية",
  hotelDesc:
    "شرائح من الجبن السويسري الفاخر، وجبن كريمي ناعم، ولحم ديك رومي مدخن عالي الجودة (حلال)، مع بيض حسب الاختيار، وفاكهة، ووعاء غرانولا، " +
    "وعصير، وزبدة، ومربى وعسل، وكرواسون بالزبدة، وخبز طازج ومشروب ساخن حسب الاختيار.",
  contDesc:
    "مشروب ساخن حسب الاختيار مع كرواسون.",
  matchaDesc:
    "مشروبات الماتشا بالفراولة والتوت وجوز الهند والمانجو تُقدَّم باردة. مشروب ماتشا لاتيه يمكن أن يكون ساخنًا أو باردًا. " +
    "جميع مشروبات الماتشا تُقدَّم مع نوع الحليب الذي تختاره بالإضافة إلى كوكي.",
  labelRoom: "رقم الغرفة",
  labelGuest: "اسم النزيل",
  labelDelivery: "وقت التوصيل المفضل",
  labelSpecific: "التاريخ والوقت المحددان",
  btnSubmit: "إرسال الطلب",
  placeName: "اسمك",
  placeNotes: "حساسيات غذائية، ملاحظات خاصة، بدون سكر، إلخ.",
  sending: "جاري إرسال الطلب...",
  success: "تم إرسال الطلب بنجاح. شكرًا لك!",
  errorMissing: "يرجى إدخال رقم الغرفة والاسم ووقت التوصيل.",
  errorSpecific: "يرجى اختيار تاريخ ووقت محددين.",
  errorSend: "حدثت مشكلة أثناء إرسال الطلب. يرجى الاتصال بالاستقبال أو بـ THE CHOW.",
  alertSuccess: "تم إرسال طلبك إلى THE CHOW. شكرًا لك!",
  alertError: "حدث خطأ أثناء إرسال الطلب. يرجى الاتصال بالاستقبال."


}

      };

      var langSelect = document.getElementById("langSelect");
      var titleEl = document.getElementById("t_title");
      var subtitleEl = document.getElementById("t_subtitle");

function applyLanguage(lang) {
  var t = translations[lang] || translations.en;
  window.currentLang = lang;        // remember current lang
  window.currentTexts = t;          // store for submit handler

  titleEl.textContent = t.title;
  subtitleEl.innerHTML = t.subtitle;

  // Section titles
  document.getElementById("t_guest_info").textContent  = t.guestInfo;
  document.getElementById("t_hotel_title").textContent = t.hotelTitle;
  document.getElementById("t_cont_title").textContent  = t.contTitle;
  document.getElementById("t_matcha_title").textContent = t.matchaTitle;
  document.getElementById("t_extras_title").textContent = t.extrasTitle;
  document.getElementById("t_total_title").textContent  = t.totalTitle;
  document.getElementById("t_notes_title").textContent  = t.notesTitle;

  // Descriptions
  document.getElementById("t_hotel_desc").innerHTML  = t.hotelDesc;
  document.getElementById("t_cont_desc").innerHTML   = t.contDesc;
  document.getElementById("t_matcha_desc").innerHTML = t.matchaDesc;

  // Labels
  document.getElementById("t_label_room").childNodes[0].textContent =
    t.labelRoom + " ";
  document.getElementById("t_label_guest").childNodes[0].textContent =
    t.labelGuest + " ";
  document.getElementById("t_label_delivery").childNodes[0].textContent =
    t.labelDelivery + " ";
  document.getElementById("t_label_specific").textContent = t.labelSpecific;

  // Placeholders
  document.getElementById("guestName").placeholder = t.placeName;
  document.getElementById("notes").placeholder     = t.placeNotes;

  // Button
  document.getElementById("t_btn_submit").textContent = t.btnSubmit;

  // RTL for Arabic
  if (lang === "ar") {
    document.documentElement.lang = "ar";
    document.body.style.direction = "rtl";
  } else {
    document.documentElement.lang = lang;
    document.body.style.direction = "ltr";
  }
}


      langSelect.addEventListener("change", function () {
        applyLanguage(this.value);
      });

      // default language
      applyLanguage("en");


      // Decode ?key=... → room number
      function decodeRoomKey(key) {
        var map = {
          "A92X1": "1",
          "QK33M": "2",
          "Z811N": "3",
          "L9T20": "4",
          "F2P6B": "5",
          "W93ZQ": "6",
          "JQ71F": "7",
          "HB82M": "8",
          "DR55P": "9",
          "MT09W": "10",
          "XZ41E": "11",
          "PQ72Z": "12",
          "B44NM": "13",
          "K29TR": "14"
        };
        return map[key] || null;
      }

      // Read ?key=... from URL and pre-select room
      var params = new URLSearchParams(window.location.search);
      var key = params.get("key");
      var roomFromUrl = key ? decodeRoomKey(key) : null;
      if (roomFromUrl) {
        var roomSelect = document.getElementById("roomNumber");
        roomSelect.value = roomFromUrl;
        roomSelect.disabled = true; // lock the room so guest can't change it
      }

      // --- PRICES (EUR) ---
      var HOTEL_PRICE = 19.90;
      var CONT_PRICE  = 7.90;
      var MATCHA_PRICE = 9.90; // adjust if needed

      var EXTRA_PRICES = {
        "Additional Egg": 2.00,
        "Additional Croissant": 2.50,
        "Additional Juice": 2.50,
        "Cheese Portion": 2.00,
        "Turkey Ham Portion": 2.00
      };

      function formatPrice(v) {
        var n = isNaN(v) ? 0 : v;
        return "€" + n.toFixed(2);
      }

      var milkDrinks = ["Cappuccino", "Flat White", "Café Latte"];

      var hotDrinks = ["Espresso", "Cappuccino", "Flat White", "Café Latte", "Black Tea"];
      var eggOptions = ["Eggs Benedict", "Boiled Egg", "Scrambled Egg", "No egg"];
      var milkOptions = ["Regular", "Oat Milk", "Lactose-Free Milk", "Soy Milk"];
      var croissantOptions = ["Butter Croissant", "Pistachio Croissant", "Chocolate Croissant", "Lotus Croissant"];
      var matchaOptions = [
        "Strawberry Matcha (cold)",
        "Raspberry Matcha (cold)",
        "Coconut Matcha (cold)",
        "Mango Matcha (cold)",
        "Matcha Latte"
      ];
      var cookieOptions = [
        "Cookie Special",
        "Matcha Cookie",
        "Ube Cookie",
        "Snickers Cookie",
        "Mint Snickers Cookie",
        "Orange Cookie",
        "Pistachio Cookie"
      ];
      var extrasList = [
        "Additional Egg – €2",
        "Additional Croissant – €2.50",
        "Additional Juice – €2.50",
        "Cheese Portion – €2",
        "Turkey Ham Portion – €2"
      ];

      var hotelQtySelect = document.getElementById("hotelQty");
      var contQtySelect = document.getElementById("contQty");
      var matchaQtySelect = document.getElementById("matchaQty");
      var hotelContainer = document.getElementById("hotelSets");
      var contContainer = document.getElementById("contSets");
      var matchaContainer = document.getElementById("matchaSets");
      var extrasContainer = document.getElementById("extrasContainer");
      var addExtraBtn = document.getElementById("addExtraBtn");
      var orderTotalEl = document.getElementById("orderTotal");

function createSelect(options, defaultValue) {
  var s = document.createElement("select");
  for (var i = 0; i < options.length; i++) {
    var opt = document.createElement("option");
    opt.value = options[i];
    opt.textContent = options[i];
    if (defaultValue && options[i] === defaultValue) {
      opt.selected = true;
    } else if (!defaultValue && i === 0) {
      opt.selected = true;
    }
    s.appendChild(opt);
  }
  return s;
}


      function wrapField(labelText, element) {
        var div = document.createElement("div");
        div.className = "field";
        var label = document.createElement("label");
        label.textContent = labelText;
        div.appendChild(label);
        div.appendChild(element);
        return div;
      }

function handleDrinkChange(drinkSelect, milkSelect) {
  var drink = drinkSelect.value;
  if (milkDrinks.indexOf(drink) !== -1) {
    milkSelect.disabled = false;
    if (!milkSelect.value) {
      milkSelect.value = "Regular";
    }
  } else {
    milkSelect.disabled = true;
    milkSelect.value = "";
  }
}


      // --- HOTEL SETS ---
      function createHotelCard(index) {
  var card = document.createElement("div");
  card.className = "card";

  var header = document.createElement("div");
  header.className = "card-header";
  header.innerHTML =
    '<span>Hotel Breakfast Set #' + index + '</span><span class="pill">€19.90</span>';
  card.appendChild(header);

  var row = document.createElement("div");
  row.className = "field-row";

  var eggSelect = createSelect(eggOptions, "Boiled Egg");
  eggSelect.id = "hotelEgg" + index;

  var drinkSelect = createSelect(hotDrinks, "Cappuccino");
  drinkSelect.id = "hotelDrink" + index;

  var milkSelect = createSelect(milkOptions, "Regular");
  milkSelect.id = "hotelMilk" + index;

  drinkSelect.addEventListener("change", function () {
    handleDrinkChange(drinkSelect, milkSelect);
  });
  handleDrinkChange(drinkSelect, milkSelect);

  row.appendChild(wrapField("Egg type", eggSelect));
  row.appendChild(wrapField("Hot drink", drinkSelect));
  row.appendChild(wrapField("Milk type (if applicable)", milkSelect));
  card.appendChild(row);

  return card;
}

      function updateHotelSets() {
        var qty = parseInt(hotelQtySelect.value, 10) || 0;
        hotelContainer.innerHTML = "";
        for (var i = 1; i <= qty; i++) {
          hotelContainer.appendChild(createHotelCard(i));
        }
        updateTotals();
      }
      hotelQtySelect.addEventListener("change", updateHotelSets);
      updateHotelSets();

      // --- CONTINENTAL SETS ---
      function createContCard(index) {
        var card = document.createElement("div");
        card.className = "card";
        var header = document.createElement("div");
        header.className = "card-header";
        header.innerHTML = '<span>Continental Breakfast Set #' + index + '</span><span class="pill">€7.90</span>';
        card.appendChild(header);

        var row = document.createElement("div");
        row.className = "field-row";

        var drinkSelect = createSelect(hotDrinks, "Cappuccino");
        drinkSelect.id = "contDrink" + index;

        var milkSelect = createSelect(milkOptions, "Regular");
        milkSelect.id = "contMilk" + index;

        drinkSelect.addEventListener("change", function () {
          handleDrinkChange(drinkSelect, milkSelect);
        });
        handleDrinkChange(drinkSelect, milkSelect);

        var croissantSelect = createSelect(croissantOptions, "Butter Croissant");
        croissantSelect.id = "contCroissant" + index;

        row.appendChild(wrapField("Hot drink", drinkSelect));
        row.appendChild(wrapField("Milk type (if applicable)", milkSelect));
        row.appendChild(wrapField("Croissant type", croissantSelect));
        card.appendChild(row);
        return card;
      }

      function updateContSets() {
        var qty = parseInt(contQtySelect.value, 10) || 0;
        contContainer.innerHTML = "";
        for (var i = 1; i <= qty; i++) {
          contContainer.appendChild(createContCard(i));
        }
        updateTotals();
      }
      contQtySelect.addEventListener("change", updateContSets);
      updateContSets();

      // --- MATCHA & COOKIE SETS ---
      function createMatchaCard(index) {
        var card = document.createElement("div");
        card.className = "card";
        var header = document.createElement("div");
        header.className = "card-header";
        header.innerHTML = '<span>Matcha & Cookie Set #' + index + '</span><span class="pill">€9.90</span>';
        card.appendChild(header);

        var row1 = document.createElement("div");
        row1.className = "field-row";

        var matchaSelect = createSelect(matchaOptions, "Strawberry Matcha (cold)");
        matchaSelect.id = "matchaType" + index;

        var tempSelect = createSelect(["Warm", "Cold"], "Cold");
        tempSelect.id = "matchaTemp" + index;

        var milkSelect = createSelect(milkOptions, "Regular");
        milkSelect.id = "matchaMilk" + index;

        var tempField = wrapField("Temperature (Matcha Latte only)", tempSelect);

        function syncTempVisibility() {
if (matchaSelect.value === "Matcha Latte") {
  tempField.style.display = "block";
  if (!tempSelect.value) {
    tempSelect.value = "Cold"; // default
  }
} else {
  tempField.style.display = "none";
  tempSelect.value = "";
}

        }
        matchaSelect.addEventListener("change", syncTempVisibility);
        syncTempVisibility();

        row1.appendChild(wrapField("Matcha type", matchaSelect));
        row1.appendChild(tempField);
        row1.appendChild(wrapField("Milk type", milkSelect));

        var row2 = document.createElement("div");
        row2.className = "field-row";
        var cookieSelect = createSelect(cookieOptions);
        cookieSelect.id = "matchaCookie" + index;
        row2.appendChild(wrapField("Cookie type", cookieSelect));

        card.appendChild(row1);
        card.appendChild(row2);
        return card;
      }

      function updateMatchaSets() {
        var qty = parseInt(matchaQtySelect.value, 10) || 0;
        matchaContainer.innerHTML = "";
        for (var i = 1; i <= qty; i++) {
          matchaContainer.appendChild(createMatchaCard(i));
        }
        updateTotals();
      }
      matchaQtySelect.addEventListener("change", updateMatchaSets);
      updateMatchaSets();

      // --- EXTRAS (dynamic) ---
      var extraCounter = 0;

      function createExtraCard(index) {
        var card = document.createElement("div");
        card.className = "card extraCard";
        card.setAttribute("data-index", String(index));

        // ----- header with remove button -----
        var header = document.createElement("div");
        header.className = "card-header";

        var titleSpan = document.createElement("span");
        titleSpan.textContent = "Extra #" + index;

        var removeBtn = document.createElement("button");
        removeBtn.type = "button";
        removeBtn.className = "btn-secondary";
        removeBtn.textContent = "– Remove";
        removeBtn.addEventListener("click", function () {
          extrasContainer.removeChild(card);
          updateTotals();
        });

        header.appendChild(titleSpan);
        header.appendChild(removeBtn);
        card.appendChild(header);

        // ----- content row -----
        var row = document.createElement("div");
        row.className = "field-row";

        // default extra item = first in list
        var itemSelect = createSelect(extrasList, extrasList[0]);
        itemSelect.id = "extraItem" + index;

        // quantity: 1..10, default 1
        var qtySelect = document.createElement("select");
        qtySelect.id = "extraQty" + index;
        for (var q = 1; q <= 10; q++) {
          var optQ = document.createElement("option");
          optQ.value = String(q);
          optQ.textContent = String(q);
          if (q === 1) optQ.selected = true;
          qtySelect.appendChild(optQ);
        }

        // egg type (only used when "Additional Egg" is chosen)
        var eggSelect = createSelect(eggOptions, "Boiled Egg");
        eggSelect.id = "extraEgg" + index;
        var eggField = wrapField("Egg type (for additional egg)", eggSelect);

        function syncEggVisibility() {
          var val = itemSelect.value || "";
          if (val.indexOf("Additional Egg") === 0) {
            eggField.style.display = "block";
          } else {
            eggField.style.display = "none";
            eggSelect.value = "Boiled Egg";
          }
        }

        itemSelect.addEventListener("change", function () {
          syncEggVisibility();
          updateTotals();
        });

        qtySelect.addEventListener("change", function () {
          updateTotals();
        });

        syncEggVisibility();

        row.appendChild(wrapField("Extra item", itemSelect));
        row.appendChild(wrapField("Quantity", qtySelect));
        row.appendChild(eggField);

        card.appendChild(row);
        return card;
      }


      addExtraBtn.addEventListener("click", function () {
        extraCounter += 1;
        extrasContainer.appendChild(createExtraCard(extraCounter));
        updateTotals();
      });

      // --- DELIVERY OPTION TOGGLE ---
            var deliveryOption = document.getElementById("deliveryOption");
      var specificTimeField = document.getElementById("specificTimeField");
      var specificDateTime = document.getElementById("specificDateTime");

      function setSpecificMin() {
        if (!specificDateTime) return;

        // Now + 20 min
        var now = new Date();
        now.setMinutes(now.getMinutes() + 30);
        now.setSeconds(0, 0);
        now.setMilliseconds(0);

        // Convert to "local ISO" without timezone, e.g. "2025-11-28T09:30"
        var local = new Date(now.getTime() - now.getTimezoneOffset() * 60000);
        specificDateTime.min = local.toISOString().slice(0, 16);
      }

      // Set an initial minimum on load
      setSpecificMin();

      deliveryOption.addEventListener("change", function () {
        if (deliveryOption.value === "specific") {
          specificTimeField.style.display = "block";
          // Refresh min when user chooses this option
          setSpecificMin();

          // If there is already a value but it's now invalid, clear it
          if (specificDateTime.value && specificDateTime.value < specificDateTime.min) {
            specificDateTime.value = "";
          }
        } else {
          specificTimeField.style.display = "none";
        }
      });


      // --- TOTALS ---
      function updateTotals() {
        var total = 0;

        var hq = parseInt(hotelQtySelect.value, 10) || 0;
        var cq = parseInt(contQtySelect.value, 10) || 0;
        var mq = parseInt(matchaQtySelect.value, 10) || 0;

        total += hq * HOTEL_PRICE;
        total += cq * CONT_PRICE;
        total += mq * MATCHA_PRICE;

        var extraCards = document.getElementsByClassName("extraCard");
        for (var i = 0; i < extraCards.length; i++) {
          var idx = extraCards[i].getAttribute("data-index");
          var item = (document.getElementById("extraItem" + idx) || {}).value || "";
          var qty = parseInt((document.getElementById("extraQty" + idx) || {}).value, 10) || 0;
          if (item && qty) {
            var key = null;
            if (item.indexOf("Additional Egg") === 0) key = "Additional Egg";
            else if (item.indexOf("Additional Croissant") === 0) key = "Additional Croissant";
            else if (item.indexOf("Additional Juice") === 0) key = "Additional Juice";
            else if (item.indexOf("Cheese Portion") === 0) key = "Cheese Portion";
            else if (item.indexOf("Turkey Ham Portion") === 0) key = "Turkey Ham Portion";

            if (key && EXTRA_PRICES[key]) {
              total += EXTRA_PRICES[key] * qty;
            }
          }
        }
        // store numeric total globally for validation on submit
        window.currentOrderTotal = total;
        orderTotalEl.textContent = " " + formatPrice(total);
      }

      // --- SUBMIT ---
      var form = document.getElementById("orderForm");
      var messageEl = document.getElementById("formMessage");
      form.addEventListener("submit", function (e) {
  e.preventDefault();
  messageEl.textContent = "";
  messageEl.className = "";
var t = window.currentTexts || translations.en;
  var room = document.getElementById("roomNumber").value;
  var guest = document.getElementById("guestName").value;
  var deliveryOpt = deliveryOption.value;
  var deliveryTime = document.getElementById("specificDateTime").value;

    if (!room || !guest || !deliveryOpt) {
    messageEl.textContent = t.errorMissing;
    messageEl.className = "error";
    return;
  }

  if (deliveryOpt === "specific") {
    if (!deliveryTime) {
      messageEl.textContent = t.errorSpecific;
      messageEl.className = "error";
      return;
    }

    // Extra safety: ensure chosen time >= min (now + 30 min)
    if (specificDateTime && specificDateTime.min) {
      var chosen = new Date(deliveryTime);
      var minAllowed = new Date(specificDateTime.min);

      if (chosen < minAllowed) {
        messageEl.textContent = t.errorSpecific; // or define a more precise message in translations
        messageEl.className = "error";
        return;
      }
    }
  }
  // block orders with 0 € total
  var numericTotal = window.currentOrderTotal || 0;
  if (numericTotal <= 0) {
    messageEl.textContent = t.errorNoItems || "Please add at least one item to your order.";
    messageEl.className = "error";
    return;
  }

  var text = "THE CHOW – Hotel Breakfast Order\n\n";
  text += "Room: " + room + "\n";
  text += "Guest: " + guest + "\n";
  text += "Delivery: " + (
    deliveryOpt === "asap"
      ? "As soon as possible"
      : deliveryOpt === "1h"
      ? "In one hour"
      : "At " + deliveryTime
  ) + "\n\n";

  // ---------- HOTEL ----------
var hotelQty = parseInt(hotelQtySelect.value, 10) || 0;
var hotelCount = 0;
for (var i = 1; i <= hotelQty; i++) {
  var egg = (document.getElementById("hotelEgg" + i) || {}).value || "";
  var drink = (document.getElementById("hotelDrink" + i) || {}).value || "";
  var milk = (document.getElementById("hotelMilk" + i) || {}).value || "";

  if (egg || drink || milk) {
    hotelCount++;
    if (hotelCount === 1) text += "Hotel Breakfast Menu:\n";

    text += "  Set #" + i + ": Egg: " + egg + ", Drink: " + drink;
    if (drink && milkDrinks.indexOf(drink) !== -1 && milk) {
      text += ", Milk: " + milk;
    }
    text += "\n";
  }
}

  if (hotelCount > 0) text += "\n";

  // ---------- CONTINENTAL ----------
  var contQty = parseInt(contQtySelect.value, 10) || 0;
var contCount = 0;
for (var j = 1; j <= contQty; j++) {
  var cd = (document.getElementById("contDrink" + j) || {}).value || "";
  var cm = (document.getElementById("contMilk" + j) || {}).value || "";
  var cc = (document.getElementById("contCroissant" + j) || {}).value || "";

  if (cd || cm || cc) {
    contCount++;
    if (contCount === 1) text += "Continental Light Breakfast:\n";

    text += "  Set #" + j + ": Drink: " + cd;
    if (cd && milkDrinks.indexOf(cd) !== -1 && cm) {
      text += ", Milk: " + cm;
    }
    text += ", Croissant: " + cc + "\n";
  }
}

  if (contCount > 0) text += "\n";

  // ---------- MATCHA & COOKIE ----------
  var matchaQty = parseInt(matchaQtySelect.value, 10) || 0;
var matchaCount = 0;
for (var k = 1; k <= matchaQty; k++) {
  var type = (document.getElementById("matchaType" + k) || {}).value || "";
  var temp = (document.getElementById("matchaTemp" + k) || {}).value || "";
  var mmilk = (document.getElementById("matchaMilk" + k) || {}).value || "";
  var cookie = (document.getElementById("matchaCookie" + k) || {}).value || "";

  if (type || mmilk || cookie) {
    matchaCount++;
    if (matchaCount === 1) text += "Matcha & Cookie:\n";

    text += "  Set #" + k + ": Matcha: " + type;
    if (type === "Matcha Latte" && temp) {
      text += " (" + temp + ")";
    }
    text += ", Milk: " + mmilk +
            ", Cookie: " + cookie + "\n";
  }
}

  if (matchaCount > 0) text += "\n";

  // ---------- EXTRAS ----------
  var extraCards = document.getElementsByClassName("extraCard");
  var extraCount = 0;
  for (var eIdx = 0; eIdx < extraCards.length; eIdx++) {
    var idx = extraCards[eIdx].getAttribute("data-index");
    var item = (document.getElementById("extraItem" + idx) || {}).value || "";
    var qty  = (document.getElementById("extraQty" + idx) || {}).value || "";
    var eEgg = (document.getElementById("extraEgg" + idx) || {}).value || "";
    if (item && qty) {
  extraCount++;
  if (extraCount === 1) text += "Extras:\n";
  text += "  " + extraCount + ". " + item + " × " + qty;
  if (item.indexOf("Additional Egg") === 0) {
    var eggType = eEgg || "Boiled Egg";
    text += " – Egg type: " + eggType;
  }
  text += "\n";
}

  }
  if (extraCount > 0) text += "\n";

  // ---------- NOTES ----------
  var notes = document.getElementById("notes").value;
  if (notes) {
    text += "Notes / Allergies:\n" + notes + "\n\n";
  }

  var totalText = orderTotalEl.textContent || "€0.00";
  text += totalText + "\n";
  text += "-- End of order --";

  // ---------- SEND TO GOOGLE APPS SCRIPT ----------
  var scriptUrl = "https://script.google.com/macros/s/AKfycbwaYBFm5g2Qe3yVIUkSnlwpgwQP_NzRkYBRagQTO-K6UIrOJomUoXIvdBphnN16ELiBiQ/exec"; // from Apps Script deployment

messageEl.textContent = t.sending;
messageEl.className = "";


fetch(scriptUrl, {
  method: "POST",
  body: JSON.stringify({
    room: room,
    guest: guest,
    delivery: deliveryOpt === "specific" ? ("specific: " + deliveryTime) : deliveryOpt,
    orderSummary: text,
    totalText: totalText
  })
})

    .then(function (response) { return response.json(); })
    .then(function (data) {
if (data.status === "ok") {
  messageEl.textContent = t.success;
  messageEl.className = "success";

  alert(t.alertSuccess);
  // Optional reset...
} else {
  messageEl.textContent = t.errorSend;
  messageEl.className = "error";
  alert(t.alertError);
}

    })
.catch(function (err) {
  console.error("Request error:", err);
  messageEl.textContent = t.errorSend;
  messageEl.className = "error";
  alert(t.alertError);
});

});


      // initial total
      updateTotals();
    });
  </script>
</body>
</html>


































